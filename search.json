[{"path":"https://pkg.robjhyndman.com/smoothAPC/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Alexander Dokumentov. Author. Rob Hyndman. Author, maintainer.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Dokumentov , Hyndman R (2025). smoothAPC: Smoothing Two-Dimensional Demographic Data, Optionally Taking Account Period Cohort Effects. R package version 0.3.0.9000, https://github.com/robjhyndman/smoothAPC, https://pkg.robjhyndman.com/smoothAPC/.","code":"@Manual{,   title = {smoothAPC: Smoothing of Two-Dimensional Demographic Data, Optionally Taking into Account Period and Cohort Effects},   author = {Alexander Dokumentov and Rob Hyndman},   year = {2025},   note = {R package version 0.3.0.9000, https://github.com/robjhyndman/smoothAPC},   url = {https://pkg.robjhyndman.com/smoothAPC/}, }"},{"path":"https://pkg.robjhyndman.com/smoothAPC/index.html","id":"smoothapc","dir":"","previous_headings":"","what":"Smoothing of Two-Dimensional Demographic Data, Optionally Taking into Account Period and Cohort Effects","title":"Smoothing of Two-Dimensional Demographic Data, Optionally Taking into Account Period and Cohort Effects","text":"goal smoothAPC model mortality rates sum four components: smooth bivariate function age time, smooth one-dimensional cohort effects, smooth one-dimensional period effects, random errors. model uses bivariate thin plate splines, bivariate lasso-type regularization, allows period cohort effects.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Smoothing of Two-Dimensional Demographic Data, Optionally Taking into Account Period and Cohort Effects","text":"can install stable version CRAN: can install development version smoothAPC GitHub :","code":"pak::pak(\"smoothAPC\") # install.packages(\"pak\") pak::pak(\"robjhyndman/smoothAPC\")"},{"path":"https://pkg.robjhyndman.com/smoothAPC/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Smoothing of Two-Dimensional Demographic Data, Optionally Taking into Account Period and Cohort Effects","text":"","code":"library(smoothAPC) m <- log(demography::fr.mort$rate$female[1:30, 150:160]) #> Registered S3 method overwritten by 'quantmod': #>   method            from #>   as.zoo.data.frame zoo #> Registered S3 methods overwritten by 'demography': #>   method      from  #>   print.lca   e1071 #>   summary.lca e1071 plot(m) sm <- autoSmoothAPC(m) plot(sm) plot(sm, \"period\") plot(sm, \"cohort\")"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an automatically chosen smooth APC model — autoSmoothAPC","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"Smooths demographic data using automatically estimated parameters optionally taking account period cohort effects (effects = TRUE). available years diagonals used estimation period cohort effects.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"","code":"autoSmoothAPC(   data,   effects = TRUE,   cornerLength = 7,   affdDiagonals = NULL,   affdYears = NULL,   lower = head(c(0.01, 0.01, 0.01, 2, 0.001, 2, 0.001), 3 + effects * 4),   upper = head(c(1.2, 1.8, 1.2, 12, 0.4, 12, 0.4), 3 + effects * 4),   init = head(c(0.1, 0.1, 0.2, 4, 0.001, 4, 0.001), 3 + effects * 4),   reltol = 0.001,   parameters = NULL,   trace = FALSE,   control = list(nnzlmax = 1e+06, nsubmax = 2e+06, tmpmax = 2e+05),   weights = NULL )"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"data Demographic data (log mortality) presented matrix. Row numbers represent ages column numbers represent time. effects Controls cohort period effects taken account. cornerLength Sets smallest length diagonal considered cohort effects. affdDiagonals Diagonals used cohort effects. first diagonal bottom left corner data matrix (maximal age minimal time data matrix). affdYears Years used period effects. lower Lowest possible values optimization procedure. upper Highest possible values optimization procedure. init Initial values optimization procedure. reltol Relative tolerance parameter supplied optim function. parameters Optional model parameters. provided, estimated. trace Controls tracing . control control data passed directly rq.fit.sfn function. weights Define much every observation effect resulting smooth surface. parameter must dimensions data parameter. Weights can set reciprocal estimated standard deviation data.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"list four components: smooth surface, period effects, cohort effects parameters used smoothing (passed parameter estimated).","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"Dokumentov, Alexander, Hyndman, Rob J & Tickle, Leonie (2018) Bivariate smoothing mortality surfaces cohort period ridges, Stat 7:e199, https://robjhyndman.com/publications/mortality-smoothing/","code":""},{"path":[]},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"Alexander Dokumentov","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/autoSmoothAPC.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit an automatically chosen smooth APC model — autoSmoothAPC","text":"","code":"if (FALSE) { # \\dontrun{ m <- log(demography::fr.mort$rate$female[1:30, 150:160]) plot(m) sm <- autoSmoothAPC(m) plot(sm) plot(sm, \"period\") plot(sm, \"cohort\") } # }"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot.matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","title":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","text":"Displays matrix estimated demographic model class smAPC heatmap.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot.matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","text":"","code":"# S3 method for class 'matrix' plot(   x,   labs = c(\"X\", \"Y\"),   color.palette = c(\"default\", \"special\"),   main = \"\",   ... )  # S3 method for class 'smAPC' plot(   x,   component = c(\"all\", \"surface\", \"period\", \"cohort\", \"residuals\", \"original\"),   labs = c(\"Age\", \"Time\"),   color.palette = c(\"default\", \"special\"),   main = \"\",   ... )"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot.matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","text":"x Either matrix result fitting smoothed demographic model (object class smAPC). labs Vector labels X Y axes. color.palette Character string \"default\" \"special\" function accepting one argument returning color palette (example rainbow). main Title plot. ... parameters. currently ignored. component Character string specifying component plot.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot.matrix.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","text":"Alexander Dokumentov","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot.matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Methods for producing heatmap plots for matrix and smAPC objects. — plot.matrix","text":"","code":"plot(matrix(rnorm(100), 10, 10), main = \"Noise\")  plot(matrix(1:100, 10, 10), c(\"Dimension 1\", \"Dimension 2\"), main = \"Value\")   m <- log(demography::fr.mort$rate$female[1:30, 150:160]) plot(m)  plot(m, color.palette = \"special\")  plot(m, color.palette = rainbow)   if (FALSE) { # \\dontrun{ m <- log(demography::fr.mort$rate$female[1:30, 150:160]) sm <- autoSmoothAPC(m)  plot(sm) plot(sm, \"surface\") plot(sm, \"cohort\") plot(sm, \"period\") plot(sm, \"residuals\") plot(sm, \"original\", main = \"Original data\") } # }"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot3d.html","id":null,"dir":"Reference","previous_headings":"","what":"Methods for producing 3d surface plots — plot3d","title":"Methods for producing 3d surface plots — plot3d","text":"Plots matrix estimated demographic model class smAPC 3D surface.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot3d.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Methods for producing 3d surface plots — plot3d","text":"","code":"plot3d(x, ...)  # S3 method for class 'matrix' plot3d(   x,   labs = c(\"X\", \"Y\", \"Z\"),   color.palette = c(\"default\", \"special\"),   ... )  # S3 method for class 'smAPC' plot3d(   x,   component = c(\"all\", \"surface\", \"period\", \"cohort\", \"residuals\", \"original\"),   labs = c(\"Age\", \"Time\", NA),   color.palette = c(\"default\", \"special\"),   ... )"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot3d.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Methods for producing 3d surface plots — plot3d","text":"x Either matrix result fitting smoothed demographic model (object class smAPC). ... parameters. currently ignored. labs Vector labels X, Y Z axes. color.palette Character string \"default\" \"special\" function accepting one argument returning color palette (example rainbow). component Character string specifying component plot.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot3d.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Methods for producing 3d surface plots — plot3d","text":"Alexander Dokumentov","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/plot3d.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Methods for producing 3d surface plots — plot3d","text":"","code":"if (FALSE) { # \\dontrun{ plot3d(matrix(rnorm(100), 10, 10)) plot3d(matrix(1:100, 10, 10), c(\"Dimension 1\", \"Dimension 2\", \"Value\"))  m <- log(demography::fr.mort$rate$female[1:30, 150:160]) plot3d(m) plot3d(m, color.palette = \"special\") plot3d(m, color.palette = rainbow) } # }  if (FALSE) { # \\dontrun{ m <- log(demography::fr.mort$rate$female[1:30, 150:160]) sm <- autoSmoothAPC(m)  plot3d(sm) plot3d(sm, \"surface\", color.palette = \"special\") plot3d(sm, \"cohort\") plot3d(sm, \"period\") plot3d(sm, \"residuals\") plot3d(sm, \"original\", color.palette = rainbow) } # }"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"Smooths demographic data using automatically estimated parameters taking account significant period cohort effects. heuristic procedure tries figure positions period cohort effects data. also uses steps estimate model's parameters. procedure slightly outperforms autoSmoothAPC.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"","code":"signifAutoSmoothAPC(   data,   p.value = 0.05,   cornerLength = 7,   lower = c(0.01, 0.01, 0.01, 1, 0.001, 1, 0.001),   upper = c(1.2, 1.8, 1.2, 12, 0.4, 12, 0.4),   init = c(0.1, 0.1, 0.2, 4, 0.001, 4, 0.001),   reltol = 0.001,   trace = FALSE,   control = list(nnzlmax = 1e+06, nsubmax = 2e+06, tmpmax = 2e+05),   weights = NULL )"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"data Demographic data (log mortality) presented matrix. Row numbers represent ages column numbers represent time. p.value P-value used test period cohort effects significance. lower value fewer diagonals years used find cohort period effects. cornerLength Minimal length diagonal considered cohort effects. lower Lowest possible values optimization procedure. upper Highest possible values optimization procedure. init Initial values optimization procedure. reltol Relative tolerance parameter supplied optim function. trace Controls tracing . control control data passed directly rq.fit.sfn function. weights Define much every observation effect resulting smooth surface. parameter must dimensions data parameter. Weights can set reciprocal estimated standard deviation data.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"list six components: smooth surface, period effects, cohort effects, parameters used smoothing, diagonals used cohort effects years used period effects.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"Dokumentov, Alexander, Hyndman, Rob J & Tickle, Leonie (2018) Bivariate smoothing mortality surfaces cohort period ridges, Stat 7:e199, https://robjhyndman.com/publications/mortality-smoothing/","code":""},{"path":[]},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"Alexander Dokumentov","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/signifAutoSmoothAPC.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit an automatically chosen smooth APC model using a heuristic procedure — signifAutoSmoothAPC","text":"","code":"if (FALSE) { # \\dontrun{ m <- log(demography::fr.mort$rate$female[1:30, 120:139]) plot(m) sm <- signifAutoSmoothAPC(m) plot(sm) plot(sm, \"surface\") plot(sm, \"period\") plot(sm, \"cohort\") } # }"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a specified smooth APC model — smoothAPC","title":"Fit a specified smooth APC model — smoothAPC","text":"Smooths demographic data optionally taking account period cohort effects","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a specified smooth APC model — smoothAPC","text":"","code":"smoothAPC(   data,   lambda = 1,   lambdaaa = 1,   lambdayy = 1,   lambdaay = 1,   lambdaYearsEffect = 5,   thetaYearsEffect = 0.1 * lambda,   lambdaCohortEffect = 5,   thetaCohortEffect = 0.1 * lambda,   cornerLength = 7,   effects = TRUE,   affdDiagonals = NULL,   affdYears = NULL,   control = list(nnzlmax = 1e+06, nsubmax = 2e+06, tmpmax = 2e+05),   weights = NULL )"},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a specified smooth APC model — smoothAPC","text":"data Demographic data (log mortality) presented matrix. Row numbers represent ages column numbers represet time. lambda Controls \"general flexibility\" smooth surface. lambdaaa Controls \"flexibility\" smooth surface age direction (first dimension). lambdayy Controls \"flexibility\" smooth surface years direction (second dimension). lambdaay Controls \"flexibility\" smooth surface age years directions. lambdaYearsEffect Controls \"flexibility\" period effects. thetaYearsEffect Reduces likelihood period effects. lambdaCohortEffect Controls \"flexibility\" cohort effects. thetaCohortEffect Reduces likelihood cohort effects. cornerLength Sets smallest length diagonal considered cohort effects. effects Controls cohort period effects taken account. affdDiagonals Diagonals used cohort effects. affdYears Years used period effects. control Control data passed directly rq.fit.sfn function.. weights Define much every observation effect resulting smooth surface. parameter must dimentions data parameter. Weights can set reciprocal estimated standard deviation data.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a specified smooth APC model — smoothAPC","text":"List three components: smooth surface, period effects, cohort effects.","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Fit a specified smooth APC model — smoothAPC","text":"Dokumentov, Alexander, Hyndman, Rob J & Tickle, Leonie (2018) Bivariate smoothing mortality surfaces cohort period ridges, Stat 7:e199, https://robjhyndman.com/publications/mortality-smoothing/","code":""},{"path":[]},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit a specified smooth APC model — smoothAPC","text":"Alexander Dokumentov","code":""},{"path":"https://pkg.robjhyndman.com/smoothAPC/reference/smoothAPC.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a specified smooth APC model — smoothAPC","text":"","code":"m <- log(demography::fr.mort$rate$female[1:30, 150:160]) sm <- smoothAPC(m, lambdaaa = 0.2, lambdayy = 0.1, lambdaay = 0.4, effects = FALSE) plot(sm, \"original\")  plot(sm)"}]
